{%- comment -%}
  JSON-LD Breadcrumb Structured Data
  Part of SEO-001: Product SEO & Structured Data
  
  Usage: Include in product/collection templates
  {% render 'json-ld-breadcrumb', product: product %}
  {% render 'json-ld-breadcrumb', collection: collection %}
{%- endcomment -%}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": {{ shop.url | json }}
    }
    {%- if collection -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ collection.title | json }},
      "item": {{ collection.url | prepend: shop.url | json }}
    }
    {%- endif -%}
    {%- if product -%}
      {%- if product.collections.size > 0 -%}
        {%- assign primary_collection = product.collections | first -%}
        ,{
          "@type": "ListItem",
          "position": 2,
          "name": {{ primary_collection.title | json }},
          "item": {{ primary_collection.url | prepend: shop.url | json }}
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": {{ product.title | json }},
          "item": {{ product.url | prepend: shop.url | json }}
        }
      {%- else -%}
        ,{
          "@type": "ListItem",
          "position": 2,
          "name": {{ product.title | json }},
          "item": {{ product.url | prepend: shop.url | json }}
        }
      {%- endif -%}
    {%- endif -%}
    {%- if article -%}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ blog.title | json }},
      "item": {{ blog.url | prepend: shop.url | json }}
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": {{ article.title | json }},
      "item": {{ article.url | prepend: shop.url | json }}
    }
    {%- endif -%}
  ]
}
</script>
